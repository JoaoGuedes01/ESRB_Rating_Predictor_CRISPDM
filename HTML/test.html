<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESRB Predictor API</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <script>
        const domain = window.location.host
        const navigateToPage = (param) => {
            let dest = 'http://' + domain + '/' + param
            window.location.replace(dest);
        }

        const ShowAlert = (msg) => {
            placeHolder = document.getElementById('alertPlaceHolder');
            let alertDiv = document.createElement('div');
            alertDiv.innerHTML = '<div class="alert alert-success alert-dismissible" role="alert">' + msg + '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>'
            placeHolder.append(alertDiv);
        }

        const ClearInputFields = () => {
            document.getElementById("gamename").value = "";
            document.getElementById("content").value = "";
        }

        const submitPost = async () => {
            let data = {}
            let gameName = document.getElementById("gamename").value;
            if (document.getElementById('nds').checked) {
                data['no_descriptors'] = 1;
            } else {
                data['no_descriptors'] = 0;
            }

            if (document.getElementById('sls').checked) {
                data['strong_language'] = 1;
            } else {
                data['strong_language'] = 0;
            }

            if (document.getElementById('bgs').checked) {
                data['blood_and_gore'] = 1;
            } else {
                data['blood_and_gore'] = 0;
            }

            if (document.getElementById('fvs').checked) {
                data['fantasy_violence'] = 1;
            } else {
                data['fantasy_violence'] = 0;
            }

            if (document.getElementById('bs').checked) {
                data['blood'] = 1;
            } else {
                data['blood'] = 0;
            }

            if (document.getElementById('mfvs').checked) {
                data['mild_fantasy_violence'] = 1;
            } else {
                data['mild_fantasy_violence'] = 0;
            }

            if (document.getElementById('sscs').checked) {
                data['strong_sexual_content'] = 1;
            } else {
                data['strong_sexual_content'] = 0;
            }

            if (document.getElementById('sts').checked) {
                data['sexual_themes'] = 1;
            } else {
                data['sexual_themes'] = 0;
            }

            if (document.getElementById('ivs').checked) {
                data['intense_violence'] = 1;
            } else {
                data['intense_violence'] = 0;
            }

            if (document.getElementById('sugthemesy').checked) {
                data['suggestive_themes'] = 1;
            } else {
                data['suggestive_themes'] = 0;
            }

            if (document.getElementById('violencey').checked) {
                data['violence'] = 1;
            } else {
                data['violence'] = 0;
            }

            if (document.getElementById('simulatedgamblingy').checked) {
                data['simulated_gambling'] = 1;
            } else {
                data['simulated_gambling'] = 0;
            }

            if (document.getElementById('sexualcontenty').checked) {
                data['sexual_content'] = 1;
            } else {
                data['sexual_content'] = 0;
            }

            if (document.getElementById('languagey').checked) {
                data['language'] = 1;
            } else {
                data['language'] = 0;
            }

            if (document.getElementById('mildbloody').checked) {
                data['mild_blood'] = 1;
            } else {
                data['mild_blood'] = 0;
            }

            if (document.getElementById('mildsuggestivethemesy').checked) {
                data['mild_suggestive_themes'] = 1;
            } else {
                data['mild_suggestive_themes'] = 0;
            }

            if (document.getElementById('crudehumory').checked) {
                data['crude_humor'] = 1;
            } else {
                data['crude_humor'] = 0
            }

            if (document.getElementById('mildviolencey').checked) {
                data['mild_violence'] = 1
            } else {
                data['mild_violence'] = 0;
            }

            if (document.getElementById('mildlyricsy').checked) {
                data['mild_lyrics'] = 1
            } else {
                data['mild_lyrics'] = 0
            }

            if (document.getElementById('cartoonviolencey').checked) {
                data['cartoon_violence'] = 1
            } else {
                data['cartoon_violence'] = 0
            }

            if (document.getElementById('alcoholreferencey').checked) {
                data['alcohol_reference'] = 1
            } else {
                data['alcohol_reference'] = 0
            }

            if (document.getElementById('lyricsy').checked) {
                data['lyrics'] = 1
            } else {
                data['lyrics'] = 0
            }

            if (document.getElementById('drugreferencey').checked) {
                data['drug_reference'] = 1
            } else {
                data['drug_reference'] = 0
            }

            if (document.getElementById('useofalcoholy').checked) {
                data['use_of_alcohol'] = 1
            } else {
                data['use_of_alcohol'] = 0
            }

            if (document.getElementById('partialnudityy').checked) {
                data['partial_nudity'] = 1
            } else {
                data['partial_nudity'] = 0
            }

            if (document.getElementById('nudityy').checked) {
                data['nudity'] = 1
            } else {
                data['nudity'] = 0
            }

            if (document.getElementById('mildcartoonviolencey').checked) {
                data['mild_cartoon_violence'] = 1
            } else {
                data['mild_cartoon_violence'] = 0
            }

            if (document.getElementById('animatedbloody').checked) {
                data['animated_blood'] = 1
            } else {
                data['animated_blood'] = 0
            }

            let createPost = '/sendData'
            const rawResponse = await fetch(createPost, {
                method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });
            const content = await rawResponse.json();
            console.log(content);
            document.getElementById('descResDiv').innerHTML = content.desc
            document.getElementById('valueResDiv').innerHTML = 'O jogo <b>' + gameName + '</b> obteve uma pontuação de <b>' + content.message + '</b>';


            //if (content.status != 200) alert("There was an error");
            //ShowAlert("Post saved to Database");
            //ClearInputFields();
        }
    </script>

</head>

<body>

    <div style=" margin: 2rem 2rem 2rem 2rem; display: flex; justify-content: center;">
        <h1 class="display-4">Testar um jogo</h1>
    </div>

    <!--Radio Buttons-->
    <div style="display: flex; justify-content: center;">
        <div class="shadow-sm p-3 mb-5 bg-white rounded">
            <form style="width: 30rem; margin: 1.5rem;">
                <div class="mb-3">
                    <label for="exampleInputEmail1" class="form-label">Nome</label>
                    <input type="email" class="form-control" id="gamename" aria-describedby="emailHelp">
                    <div id="emailHelp" class="form-text">Nome do Jogo</div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Alcohol Reference</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioAlcoholReference" id="alcoholreferencey"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="alcoholreferencey">Sim</label>

                        <input type="radio" class="btn-check" name="radioAlcoholReference" id="alcoholreferencen"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="alcoholreferencen">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Animated Blood</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="AnimatedBlood" id="animatedbloody"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="animatedbloody">Sim</label>

                        <input type="radio" class="btn-check" name="AnimatedBlood" id="animatedbloodn"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="animatedbloodn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Blood</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radiob" id="bs" autocomplete="off">
                        <label class="btn btn-outline-primary" for="bs">Sim</label>

                        <input type="radio" class="btn-check" name="radiob" id="bn" autocomplete="off">
                        <label class="btn btn-outline-primary" for="bn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Blood and Gore</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radiobg" id="bgs" autocomplete="off">
                        <label class="btn btn-outline-primary" for="bgs">Sim</label>

                        <input type="radio" class="btn-check" name="radiobg" id="bgn" autocomplete="off">
                        <label class="btn btn-outline-primary" for="bgn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Cartoon Violence</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioCartoonViolence" id="cartoonviolencey"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="cartoonviolencey">Sim</label>

                        <input type="radio" class="btn-check" name="radioCartoonViolence" id="cartoonviolencen"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="cartoonviolencen">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Crude Humor</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioCrudoHumor" id="crudehumory"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="crudehumory">Sim</label>

                        <input type="radio" class="btn-check" name="radioCrudoHumor" id="crudehumorn"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="crudehumorn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Drug Reference</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioDrugReference" id="drugreferencey"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="drugreferencey">Sim</label>

                        <input type="radio" class="btn-check" name="radioDrugReference" id="drugreferencen"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="drugreferencen">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Fantasy Violence</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radiofv" id="fvs" autocomplete="off">
                        <label class="btn btn-outline-primary" for="fvs">Sim</label>

                        <input type="radio" class="btn-check" name="radiofv" id="fvn" autocomplete="off">
                        <label class="btn btn-outline-primary" for="fvn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Intense Violence</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioiv" id="ivs" autocomplete="off">
                        <label class="btn btn-outline-primary" for="ivs">Sim</label>

                        <input type="radio" class="btn-check" name="radioiv" id="ivn" autocomplete="off">
                        <label class="btn btn-outline-primary" for="ivn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Language</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radiolanguage" id="languagey" autocomplete="off">
                        <label class="btn btn-outline-primary" for="languagey">Sim</label>

                        <input type="radio" class="btn-check" name="radiolanguage" id="languagen" autocomplete="off">
                        <label class="btn btn-outline-primary" for="languagen">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Lyrics</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioLyrics" id="lyricsy" autocomplete="off">
                        <label class="btn btn-outline-primary" for="lyricsy">Sim</label>

                        <input type="radio" class="btn-check" name="radioLyrics" id="lyricsn" autocomplete="off">
                        <label class="btn btn-outline-primary" for="lyricsn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Mild Blood</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioMildBlood" id="mildbloody" autocomplete="off">
                        <label class="btn btn-outline-primary" for="mildbloody">Sim</label>

                        <input type="radio" class="btn-check" name="radioMildBlood" id="mildbloodn" autocomplete="off">
                        <label class="btn btn-outline-primary" for="mildbloodn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Mild Cartoon Violence</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="MildCartoonViolence" id="mildcartoonviolencey"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="mildcartoonviolencey">Sim</label>

                        <input type="radio" class="btn-check" name="MildCartoonViolence" id="mildcartoonviolencen"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="mildcartoonviolencen">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Mild Fantasy Violence</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radiomfv" id="mfvs" autocomplete="off">
                        <label class="btn btn-outline-primary" for="mfvs">Sim</label>

                        <input type="radio" class="btn-check" name="radiomfv" id="mfvn" autocomplete="off">
                        <label class="btn btn-outline-primary" for="mfvn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Mild Lyrics</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioMildLyrics" id="mildlyricsy"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="mildlyricsy">Sim</label>

                        <input type="radio" class="btn-check" name="radioMildLyrics" id="mildlyricsn"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="mildlyricsn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Mild Suggestive Themes</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioMildSuggestiveThemes"
                            id="mildsuggestivethemesy" autocomplete="off">
                        <label class="btn btn-outline-primary" for="mildsuggestivethemesy">Sim</label>

                        <input type="radio" class="btn-check" name="radioMildSuggestiveThemes"
                            id="mildsuggestivethemesn" autocomplete="off">
                        <label class="btn btn-outline-primary" for="mildsuggestivethemesn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Mild Violence</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioMildViolence" id="mildviolencey"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="mildviolencey">Sim</label>

                        <input type="radio" class="btn-check" name="radioMildViolence" id="mildviolencen"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="mildviolencen">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">No Descriptors</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radiond" id="nds" autocomplete="off">
                        <label class="btn btn-outline-primary" for="nds">Sim</label>

                        <input type="radio" class="btn-check" name="radiond" id="ndn" autocomplete="off">
                        <label class="btn btn-outline-primary" for="ndn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Nudity</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="Nudity" id="nudityy" autocomplete="off">
                        <label class="btn btn-outline-primary" for="nudityy">Sim</label>

                        <input type="radio" class="btn-check" name="Nudity" id="nudityn" autocomplete="off">
                        <label class="btn btn-outline-primary" for="nudityn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Partial Nudity</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="PartialNudity" id="partialnudityy"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="partialnudityy">Sim</label>

                        <input type="radio" class="btn-check" name="PartialNudity" id="partialnudityn"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="partialnudityn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Sexual Content</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioSexualContent" id="sexualcontenty"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="sexualcontenty">Sim</label>

                        <input type="radio" class="btn-check" name="radioSexualContent" id="sexualcontentn"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="sexualcontentn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Sexual Themes</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radiost" id="sts" autocomplete="off">
                        <label class="btn btn-outline-primary" for="sts">Sim</label>

                        <input type="radio" class="btn-check" name="radiost" id="stn" autocomplete="off">
                        <label class="btn btn-outline-primary" for="stn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Simulated Gambling</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioSimulatedGambling" id="simulatedgamblingy"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="simulatedgamblingy">Sim</label>

                        <input type="radio" class="btn-check" name="radioSimulatedGambling" id="simulatedgamblingn"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="simulatedgamblingn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Strong Language</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radiosl" id="sls" autocomplete="off">
                        <label class="btn btn-outline-primary" for="sls">Sim</label>

                        <input type="radio" class="btn-check" name="radiosl" id="sln" autocomplete="off">
                        <label class="btn btn-outline-primary" for="sln">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Strong Sexual Content</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radiossc" id="sscs" autocomplete="off">
                        <label class="btn btn-outline-primary" for="sscs">Sim</label>

                        <input type="radio" class="btn-check" name="radiossc" id="sscn" autocomplete="off">
                        <label class="btn btn-outline-primary" for="sscn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Suggestive Themes</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioSuggestiveThemes" id="sugthemesy"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="sugthemesy">Sim</label>

                        <input type="radio" class="btn-check" name="radioSuggestiveThemes" id="sugthemesn"
                            autocomplete="off">
                        <label class="btn btn-outline-primary" for="sugthemesn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Use Of Alcohol</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="UseOfAlcohol" id="useofalcoholy" autocomplete="off">
                        <label class="btn btn-outline-primary" for="useofalcoholy">Sim</label>

                        <input type="radio" class="btn-check" name="UseOfAlcohol" id="useofalcoholn" autocomplete="off">
                        <label class="btn btn-outline-primary" for="useofalcoholn">Não</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div>
                        <label class="form-label">Violence</label>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="radioViolence" id="violencey" autocomplete="off">
                        <label class="btn btn-outline-primary" for="violencey">Sim</label>

                        <input type="radio" class="btn-check" name="radioViolence" id="violencen" autocomplete="off">
                        <label class="btn btn-outline-primary" for="violencen">Não</label>
                    </div>
                </div>



                <div>
                    <!-- Button trigger modal -->
                    <button onclick="submitPost()" type="button" class="btn btn-primary" data-bs-toggle="modal"
                        data-bs-target="#exampleModalCenteredScrollable">
                        Testar
                    </button>
                    <button onclick="navigateToPage('')" style="background-color: red; border-color: red;" type="button"
                        class="btn btn-primary">Voltar</button>
                </div>
            </form>
        </div>
    </div>
    <div id="alertPlaceHolder"></div>

    <div class="modal fade" id="exampleModalCenteredScrollable" tabindex="-1"
        aria-labelledby="exampleModalCenteredScrollableTitle" style="display: none;" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalCenteredScrollableTitle">Previsão do Modelo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <p id="valueResDiv"></p>

                    <p id="descResDiv"></p>
                    <br><br><br><br><br><br><br><br><br><br>
                    <p>Obrigado por utilizar a nossa API, equipa 103 AASE</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

</body>

</html>